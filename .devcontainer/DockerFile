FROM maven:3.9.6-eclipse-temurin-21

# Installer Node.js pour le frontend
RUN curl -fsSL https://deb.nodesource.com/setup_20.x | bash - \
    && apt-get install -y nodejs \
    && apt-get clean

# Créer un utilisateur non-root
RUN useradd -m -s /bin/bash vscode

# Définir le home pour Maven
ENV MAVEN_CONFIG=/home/vscode/.m2

# Répertoire de travail
WORKDIR /workspace

# Utilisateur par défaut
USER vscode
